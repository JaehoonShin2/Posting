### 유저의 종류

aws 는 크게 두 구분으로 유저를 구분한다.

1. 루트 유저
- 생성한 계정의 모든 권한을 자동으로 가지고 있음
- 생성 시 만든 이메일 주소로 로그인
- 탈취 시 복구가 힘들기 때문에 MFA 설정 권장
- 루트 유저는 관리용으로만 이용(계정 설정 변경이나 빌링 등)
- AWS API 호출이 불가능

2. IAM 유저
- IAM 을 통해 생성한 유저
- 만들 때 주어진 아이디로 로그인
- 기본 권한이 없어서 따로 권한 부여가 필요함
- AWS API 호출이 가능
	- access key(아이디 개념) 과  secret access key(패스워드 개념)
- aws 의 관리를 제외한 모든 작업은 관리용 IAM 유저를 만들어서 사용해야 한다.
- 권한 부여 시 루트 유저와 같이 모든 권한을 부여할 수 있지만, 빌링 권한은 루트 유저가 허용을 해야 한다.


![[제목 없는 다이어그램.drawio (1).png]]

| 종류             | 루트 유저          | IAM 유저                                  |
| ---------------- | ------------------ | ----------------------------------------- |
| 로그인방식       | 이메일로 로그인    | 만들 때 주어진 아이디로 로그인            |
| dafualt 권한     | 모든 권한이 주어짐 | 기본 권한이 없음. 따로 권한을 부여해야 함 |
| aws api 호출여부 | 불가능             | 가능                                      |


### IAM 유저 생성

![[스크린샷 2023-07-02 오후 10.14.01.png]]

- 루트 계정(회원가입 시의 이메일) 으로 로그인 한 뒤, 오른쪽 상단의 보안 자격 증명 > 사용자를 클릭한다.


![[스크린샷 2023-07-02 오후 10.14.18.png]]

- 사용자 추가 버튼을 클릭하고, 사용자 이름(로그인 시 사용하게 됨) 을 입력하고 access 관련 방법을 지정한다. 현재같은 경우 aws 가 제공하는 identity center 를 활용하는 방식이다.


![[스크린샷 2023-07-02 오후 10.14.44.png]]

- 입력을 완료한 후, 다음 버튼을 클릭하면 해당 페이지로 이동된다. 여기서 활성화 버튼을 클릭한다.


![[스크린샷 2023-07-02 오후 10.14.59.png]]

- 활성화가 정상적으로 되었다면, 조직을 생성해야 한다.


![[스크린샷 2023-07-02 오후 10.16.02.png]]

- 기본 정보를 입력한 뒤, 아랫부분에 있는 선택 사항 부분도 필요에 따라 추가적으로 입력하고 다음 버튼을 클릭한다.


![[스크린샷 2023-07-02 오후 10.18.32.png]]

- 만일 아직 생성한 그룹이 없다면 위 이미지와 같은 모습일 것이다. 그룹 생성을 클릭하여 그룹을 생성해준다.


![[스크린샷 2023-07-02 오후 10.21.36.png]]

- 입력한 이메일 주소로, 사용자 인증에 관련된 메일이 전송된다. 메일에서 accept invitation 버튼을 클릭하여 비밀번호를 설정해준다.

![img.png](https://blog.kakaocdn.net/dn/HoSHZ/btrZSTOg0Bz/KLnwxtgXyPnOVSZ6Pho9o0/img.png)

- 참고로 로그인을 위해서는 Your AWS access portal URL로 접속을 해서 로그인을 해야하기 때문에 Your AWS access portal URL을 잘 기록해둬야 한다.

- 이메일로 받은 AWS access portal URL에 접속한다.


![[스크린샷 2023-07-02 오후 10.40.29.png]]

- Identity Center를 통해서 사용자를 생성했기 때문에 aws 사이트에서 IAM 사용자로 로그인은 동작하지 않는다. aws access portal URL로 접속해야한다.

- 초기 로그인 시에는 아직 해당 iam 계정에 권한을 부여한 것이 없기 때문에 루트 계정에서 권한을 부여해주어야 한다.


![[스크린샷 2023-07-02 오후 10.55.28.png]]

- IAM identity center > 권한 세트 페이지로 들어와서 권한 세트 생성을 클릭한다.


![[스크린샷 2023-07-02 오후 10.55.44.png]]

- 권한 세트의 유형을 지정하고, 현재 관리자 IAM 을 만들 예정이기 때문에 사전 정의된 권한 세트 중  admin 권한 세트를 지정했다.


![[스크린샷 2023-07-02 오후 10.56.23.png]]

- 추가적으로 지정해줄 것이 있다면 지정해준 뒤 다음을 클릭한다.


![[스크린샷 2023-07-02 오후 10.57.02.png]]

- 해당 권한을 누구(사용자 혹은 그룹)에게 부여할 것인지 선택할 수 있다. 사용자 또는 그룹 할당 버튼을 클릭해서 원하는 대상을 지정한다.

![[스크린샷 2023-07-02 오후 10.57.22.png]]

- 지정을 완료한 후 다음을 클릭한다.


![[스크린샷 2023-07-02 오후 10.57.38.png]]

- 권한세트를 확인하고 다음을 클릭한다.


![[스크린샷 2023-07-02 오후 10.57.51.png]]

- 최종적으로 어느 사용자(그룹)에게 어떤 권한 세트를 부여하는지 확인 후 제출읋 클릭하면, 조금 지나 권한 부여가 성공적으로 완료되었음을 알려준다.


![[스크린샷 2023-07-02 오후 11.00.25.png]]

- 그 후 다시 access url 을 통해 로그인 페이지로 이동, IAM 사용자 이름과 비밀번호를 입력하면 새롭게 부여한 권한 목록이 나오게 된다.
